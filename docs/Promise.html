<!DOCTYPE html><html><head><meta charset="utf-8"><title>Promise JavaScript API</title><meta name="description" content="Interactive API reference for the JavaScript Promise Object. A Promise is an object that represents an asynchronous operation that will eventually produce a value. Use the then() method to hook up a c"><link rel="stylesheet" type="text/css" href="styles.css"><script type="text/javascript">var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23450559-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script></head><body><script>if (sessionStorage.collapsed === 'true') {
  document.body.classList.add('members-collapsed');
}</script><div class="topnav"><a href="/">JavaScripture</a><div class="bookmarks"><a class="bookmark contribute" href="https://github.com/nkronlage/JavaScripture">Contribute via GitHub</a> <a class="bookmark" href="/feedback">Feedback</a></div></div><div class="container"><nav class="leftnav"><div id="searchContainer"><input id="searchBox" type="text" placeholder="Search (Ctrl + S)" autocomplete="false" autofocus="autofocus"><div id="resultsBox" style="display:none;"></div></div><div id="apichooser"><a href="#" onclick="openApiChooser(); return false;"><div class="arrow"></div><span id="selectedsets"></span></a><div id="obscure"></div><div id="apisets"><ul></ul></div></div><div class="toc"><h2>Promise</h2><div class="navgroup"><div class="group"><a href="#Constructors">Constructors</a></div><div class="group collapsed"><a href="#InstanceMethods" onclick="expandoClicked(this.parentNode); return false;"><div class="arrow"></div>Instance Methods</a><div class="subgroup"><a href="#catch_Function">catch</a><a href="#finally_Function">finally</a><a href="#then_Function_Function">then</a></div></div><div class="group collapsed"><a href="#PromiseMethods" onclick="expandoClicked(this.parentNode); return false;"><div class="arrow"></div>Promise Methods</a><div class="subgroup"><a href="#all_Iterable">all</a><a href="#allSettled_Iterable">allSettled</a><a href="#race_Iterable">race</a><a href="#reject_Error">reject</a><a href="#resolve_Object">resolve</a></div></div></div><h2>JavaScript API</h2><div id="related-apis" class="navgroup"></div><h2>All API</h2><div id="rootObjs" class="navgroup"><span class="empty">No API set selected.</span></div></div></nav><div class="content"><h1 class="declaration"><span class="hide">JavaScript</span> <span class="object">Promise</span> <span class="type">: <a href="/Object">Object</a></span></h1><div class="metadata"><span>constructor</span></div><div class="objectdescription">A Promise is an object that represents an asynchronous operation that will eventually produce a value. Use the <a href="#then"><code>then()</code></a> method to hook up a callback that will be called when the result of the asynchronous operation is ready. ECMAScript 2017 introduced <code>async function()</code>s which return Promises and the <code>await</code> keyword which can simplify Promise based code.<div class="membermetadata"><span class="ecmascript2015">ECMAScript 2015</span> <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects" class="spec">Spec</a></div></div><div><a name="Constructors"></a><h2>Constructors</h2><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="Promise"></a> <a name="new_Promise_Function"></a><div class="declaration">new <span class="membername primary">Promise</span>(<span class="membername">executor</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a><div class="subfunction"><span class="membername">executor</span>(<span class="membername">resolve</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>, <span class="membername">reject</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>)&nbsp;:&nbsp;<a class="membertype" href="/undefined">undefined</a></div><div class="subfunction"><span class="membername">resolve</span>(<span class="membername">value</span>&nbsp;:&nbsp;<a class="membertype" href="/Object">Object</a>)&nbsp;:&nbsp;<a class="membertype" href="/undefined">undefined</a></div><div class="subfunction"><span class="membername">reject</span>(<span class="membername">error</span>&nbsp;:&nbsp;<a class="membertype" href="/Error">Error</a>)&nbsp;:&nbsp;<a class="membertype" href="/undefined">undefined</a></div></div><div class="member-body"><p class="description">Creates a new Promise. The Promise constructor calls <code>executer</code> immediately with the two functions <code>resolve</code> and <code>reject</code>. <code>executor</code> should begin the asynchronous operation. When the operation is complete, call the <code>resolve</code> function with the result. If there is an error during the operation, call <code>reject</code> with the error information.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
var promise = new Promise(function(resolve, reject) {
  console.log(&#39;in Promise constructor function&#39;);
  setTimeout(function() {
    console.log(&#39;in setTimeout callback&#39;);
    resolve(&#39;foo&#39;);
  }, 100);
});
console.log(&#39;created promise&#39;);

promise.then(function(result) {
  console.log(&#39;promise returned: &#39; + result);
});
console.log(&#39;hooked promise.then()&#39;);
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.Promise"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-executor" class="spec">Spec</a></div></div></div></div><div><a name="InstanceMethods"></a><h2>Instance Methods</h2><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="catch"></a> <a name="catch_Function"></a><div class="declaration"><span class="membername primary">catch</span>(<span class="membername">onReject</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a><div class="subfunction"><span class="membername">onReject</span>(<span class="membername">error</span>&nbsp;:&nbsp;<a class="membertype" href="/Error">Error</a>)&nbsp;:&nbsp;<a class="membertype" href="/undefined">undefined</a></div></div><div class="member-body"><p class="description">Schedules <code>onReject</code> to be called if the promise had an error (ie, the <a href="#new_Promise_Function"><code>executer function</code></a> called <code>reject()</code> or a method in the promise chain threw an error). <code>error</code> is the value passed to <code>reject</code>. This is a shorthand for calling <a href="#then"><code>then(undefined, onReject)</code></a>. See also the <a href="/Window#unhandledrejection">window unhandledrejecton event</a>.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
var throwPromise = new Promise(function(resolve, reject) {
  throw &#39;value thrown&#39;;
});

throwPromise.catch(function(result) {
  console.log(&#39;caught: &#39; + result);
});

var rejectPromise = new Promise(function(resolve, reject) {
  setTimeout(function() {
    reject(&#39;value passed to reject()&#39;);
  }, 100);
});

rejectPromise.catch(function(result) {
  console.log(&#39;caught: &#39; + result);
});
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.catch"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch" class="spec">Spec</a></div></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="finally"></a> <a name="finally_Function"></a><div class="declaration"><span class="membername primary">finally</span>(<span class="membername">onFinally</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a><div class="subfunction"><span class="membername">onFinally</span>()&nbsp;:&nbsp;<a class="membertype" href="/undefined">undefined</a></div></div><div class="member-body"><p class="description">Also schedules <code>onFinally</code> to be called when the promise has been either resolved or rejected.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
var promise = new Promise((reject, resolve) =&gt; {
  let x = Math.random();
  if (x &lt; 0.5) {
    resolve(x);
  }
  else {
    reject(x);
  }
}).then(x =&gt; {
  console.log(&#39;resolved:&#39;, x);
}).catch(e =&gt; {
  console.log(&#39;rejected:&#39;, e);
}).finally(() =&gt; {
  console.log(&#39;in finally&#39;);
});
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.finally"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><span class="ecmascript2018">ECMAScript 2018</span> <a href="https://tc39.es/ecma262/#sec-promise.prototype.finally" class="spec">Spec</a></div></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="then"></a> <a name="then_Function_Function"></a><div class="declaration"><span class="membername primary">then</span>(<span class="membername">onResolve</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>, <span class="optional">[<span class="membername">onReject</span>&nbsp;:&nbsp;<a class="membertype" href="/Function">Function</a>]</span>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a><div class="subfunction"><span class="membername">onResolve</span>(<span class="membername">value</span>&nbsp;:&nbsp;<a class="membertype" href="/Object">Object</a>)&nbsp;:&nbsp;<a class="membertype" href="/Object">Object</a></div><div class="subfunction"><span class="membername">onReject</span>(<span class="membername">error</span>&nbsp;:&nbsp;<a class="membertype" href="/Error">Error</a>)&nbsp;:&nbsp;<a class="membertype" href="/Object">Object</a></div></div><div class="member-body"><p class="description"></p><p>Schedules <code>onResolve</code> (if provided) to be called when the promise has been resolved. <code>value</code> is the object passed to the <a href="/#new_Promise"><code>resolve()</code></a> function.</p><p>Also schedules <code>onReject</code> (if provided) to be called when the promise has been rejected or an exception was thrown in the <code>executor</code> method. <code>error</code> is the object passed to the <a href="/#new_Promise"><code>reject()</code></a> function.</p><p>The return value from <code>onResolve</code> (or <code>onReject</code>) can either be a normal Object or a Promise. If the return value from <code>onResolve</code> is a normal Object, the Promise returned by <code>then()</code> will be resolved with that Object. If the return value from <code>onResolve</code> is a Promise, <code>then()</code> will wait for that Promise to be resolved. <code>then()</code> will resolve the Promise it returned with the same value.</p><p>See also <a href="#catch"><code>catch()</code></a>.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
// This promise randomly passes or fails.
var promise = new Promise(function(resolve, reject) {
  var random = Math.random();
  if (random &lt; 0.5) {
    resolve(&#39;resolving with &#39; + random);
  }
  else {
    reject(&#39;rejecting with &#39; + random);
  }
});

promise.then(function(result) {
  console.log(&#39;onResolve: &#39; + result);
},
function(error) {
  console.log(&#39;onReject: &#39; + error);
});


// The following shows a simple &#39;Promise-ified&#39; version of XMLHttpRequest
var loadUrl = function(url) {
  return new Promise(function(resolve, reject) {
    var request = new XMLHttpRequest();
    request.open(&#39;GET&#39;, url);
    request.onload = function() {
      resolve(request.response);
    };
    request.send(); 
  });
};

// The following demonstrates chaining Promises and how you can return
// either a Promise or a normal object to the next part of the chain 
loadUrl(&#39;/JSON&#39;).then(
  function(promiseText) {
    // Find the first link in the page and return a Promise that will load
    // that page.  The next block will run when this Promise completes.
    var firstLink = promiseText.match(/href=&#34;(\/.*?)&#34;/)[1];
    return loadUrl(firstLink);
  }
).then(
  function(firstLinkText) {
    // Return the beginning of the first page&#39;s text. Since this is 
    // not returning a Promise.  The next block will run immediately.
    return firstLinkText.substring(0, 50);
  }
).then(
  function(firstLinkBeginning) {
    console.log(&#39;firstLinkBeginning: &#39; + firstLinkBeginning);
});
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.then"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.then" class="spec">Spec</a></div></div></div></div><div><a name="PromiseMethods"></a><h2>Promise Methods</h2><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="all"></a> <a name="all_Iterable"></a><div class="declaration"><span class="membername primary">all</span>(<span class="membername">promises</span>&nbsp;:&nbsp;<a class="membertype" href="/Iterable">Iterable</a>&lt;<a class="membertype" href="/Promise">Promise</a>&gt;)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a>&lt;<a class="membertype" href="/Array">Array</a>&gt;</div><div class="member-body"><p class="description">Creates a new Promise that will be resolved when all of <code>promises</code> are resolved. If any of the promises are rejected, the returned Promise will be rejected immediately and will provide the value of the Promise that was rejected. See also <a href="#allSettled">allSettled()</a>.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
var promises = [];

for (var i = 0; i &lt; 10; i++) {
  promises.push(new Promise(function(resolve, reject) {
    var timeout = i * 10;
    setTimeout(function() {
      resolve(&#39;resolving after &#39; + timeout + &#39; milliseconds&#39;);
    }, timeout);
  }));
}

Promise.all(promises).then(function(results) {
  console.log(&#39;all results:&#39;);
  for (var result of results) {
    console.log(&#39;  &#39; + result);
  }
});
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.all"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.all" class="spec">Spec</a></div></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="allSettled"></a> <a name="allSettled_Iterable"></a><div class="declaration"><span class="membername primary">allSettled</span>(<span class="membername">promises</span>&nbsp;:&nbsp;<a class="membertype" href="/Iterable">Iterable</a>&lt;<a class="membertype" href="/Promise">Promise</a>&gt;)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a>&lt;<a class="membertype" href="/Array">Array</a>&gt;</div><div class="member-body"><p class="description">Creates a new Promise that will be resolved when all of <code>promises</code> are resolved or rejected. The result of the promise is an Array containing objects with a <code>status</code> property (containing either <code>'fulfilled'</code> or <code>'rejected'</code>) and either a <code>value</code> property (for fulfilled promises) or <code>reason</code> property (for rejected promises). See also <a href="#all">all()</a>.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
var promises = [];

for (let i = 0; i &lt; 10; i++) {
  promises.push(new Promise(function(resolve, reject) {
    var timeout = i * 10;
    setTimeout(function() {
      if (i % 3 === 0) {
        reject(&#39;rejecting after &#39; + timeout + &#39; milliseconds&#39;);
      }
      else {
        resolve(&#39;resolving after &#39; + timeout + &#39; milliseconds&#39;);
      }
    }, timeout);
  }));
}

Promise.allSettled(promises).then(function(results) {
  console.log(&#39;all results:&#39;);
  for (var result of results) {
    console.dir(result);
  }
});
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.allSettled"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><span class="ecmascript2020">ECMAScript 2020</span> <a href="https://tc39.es/ecma262/#sec-promise.allsettled" class="spec">Spec</a></div></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="race"></a> <a name="race_Iterable"></a><div class="declaration"><span class="membername primary">race</span>(<span class="membername">promises</span>&nbsp;:&nbsp;<a class="membertype" href="/Iterable">Iterable</a>&lt;<a class="membertype" href="/Promise">Promise</a>&gt;)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a></div><div class="member-body"><p class="description">Creates a new Promise that will be resolved when the first of <code>promises</code> is resolved. If a promise is rejected before any resolve, the returned Promise will be rejected immediately and will provide the value of the Promise that was rejected.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
var promises = [];

for (var i = 0; i &lt; 10; i++) {
  promises.push(new Promise(function(resolve, reject) {
    var random = Math.random() * 1000;
    setTimeout(function() {
      resolve(&#39;resolving after &#39; + random + &#39; milliseconds&#39;);
    }, random);
  }));
}

Promise.race(promises).then(function(result) {
  console.log(&#39;first result: &#39; + result);
});
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.race"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.race" class="spec">Spec</a></div></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="reject"></a> <a name="reject_Error"></a><div class="declaration"><span class="membername primary">reject</span>(<span class="membername">error</span>&nbsp;:&nbsp;<a class="membertype" href="/Error">Error</a>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a></div><div class="member-body"><p class="description">Returns a new Promise that is in the rejected state with <code>error</code> as the rejected error. Useful for passing values to APIs that expect promises.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
// The following are equivalent
var w = Promise.reject(&#39;foo&#39;);
var x = new Promise(function(resolve, reject) {
                      reject(&#39;foo&#39;);
                    });
var y = (async function() { throw &#39;foo&#39; })();
var z = (async () =&gt; { throw &#39;foo&#39; })();
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.reject"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.reject" class="spec">Spec</a></div></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="resolve"></a> <a name="resolve_Object"></a><div class="declaration"><span class="membername primary">resolve</span>(<span class="membername">value</span>&nbsp;:&nbsp;<a class="membertype" href="/Object">Object</a>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a></div><div class="member-body"><p class="description">Returns a new Promise that is in the resolved state with <code>value</code> as the resolved value. Useful for passing values to APIs that expect promises.</p><div class="example"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="12" cols="60" wrap="off">
// The following are equivalent
var w = Promise.resolve(&#39;foo&#39;);
var x = new Promise(function(resolve) {
                      resolve(&#39;foo&#39;);
                    });
var y = (async function() { return &#39;foo&#39; })();
var z = (async () =&gt; &#39;foo&#39;)();
</textarea><a onclick='executeExample(this.parentNode.parentNode, "Promise.resolve"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="errormessage" style="display: none"></div><pre class="results"> </pre></div></div></div><p></p><div class="membermetadata"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise.resolve" class="spec">Spec</a></div></div></div></div><div class="bottomnav"><a href="/">home</a> <a href="/license">license</a> <a href="https://github.com/nkronlage/JavaScripture">contribute</a> <a href="/feedback">feedback</a></div><div class="copyright">Copyright Â© JavaScripture Contributors</div></div></div></body><script src="javascripture.js"></script></html>