<!DOCTYPE html><html><head><meta charset="utf-8"><title>XRSystem JavaScript API</title><meta name="description" content="Interactive API reference for the JavaScript XRSystem Object. The entry point for using Augmented Reality (AR) or Virtual Reality (VR) in the browser. Used to create an XRSession.  Available through n"><link rel="stylesheet" type="text/css" href="styles.css"><script type="text/javascript">var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23450559-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script></head><body><script>if (sessionStorage.collapsed === 'true') {
  document.body.classList.add('members-collapsed');
}</script><div class="topnav"><a href="/">JavaScripture</a><div class="bookmarks"><a class="bookmark contribute" href="https://github.com/nkronlage/JavaScripture">Contribute via GitHub</a> <a class="bookmark" href="/feedback">Feedback</a></div></div><div class="container"><nav class="leftnav"><div id="searchContainer"><input id="searchBox" type="text" placeholder="Search (Ctrl + S)" autocomplete="false" autofocus="autofocus"><div id="resultsBox" style="display:none;"></div></div><div id="apichooser"><a href="#" onclick="openApiChooser(); return false;"><div class="arrow"></div><span id="selectedsets"></span></a><div id="obscure"></div><div id="apisets"><ul></ul></div></div><div class="toc"><h2>XRSystem</h2><div class="navgroup"><div class="group collapsed"><a href="#InstanceMethods" onclick="expandoClicked(this.parentNode); return false;"><div class="arrow"></div>Instance Methods</a><div class="subgroup"><a href="#isSessionSupported_String" title="isSessionSupported">isSessionSupported</a><a href="#requestSession_String_Object">requestSession</a></div></div><div class="group collapsed"><a href="#InstanceEvents" onclick="expandoClicked(this.parentNode); return false;"><div class="arrow"></div>Instance Events</a><div class="subgroup"><a href="#devicechange">devicechange</a></div></div></div><h2>WebXR API</h2><div id="related-apis" class="navgroup"></div><h2>All API</h2><div id="rootObjs" class="navgroup"><span class="empty">No API set selected.</span></div></div></nav><div class="content"><h1 class="declaration"><span class="object">XRSystem</span> <span class="type">: <a href="/EventTarget">EventTarget</a></span></h1><div class="metadata"></div><div class="objectdescription">The entry point for using Augmented Reality (AR) or Virtual Reality (VR) in the browser. Used to create an <a href="/XRSession">XRSession</a>. Available through <a href="/Navigator#xr">navigator.xr</a>.<div class="membermetadata"><a href="https://immersive-web.github.io/webxr/#xrsystem" class="spec">Spec</a></div></div><div><a name="InstanceMethods"></a><h2>Instance Methods</h2><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="isSessionSupported"></a> <a name="isSessionSupported_String"></a><div class="declaration"><span class="membername primary">isSessionSupported</span>(<span class="membername">mode</span>&nbsp;:&nbsp;<a class="membertype" href="/String">String</a>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a>&lt;<a class="membertype" href="/Boolean">Boolean</a>&gt;</div><div class="member-body"><p class="description"><code>mode</code> must be one of <code>'inline'</code>, <code>'immersive-vr'</code>, or <code>'immersive-ar'</code>.</p><div class="htmlexample"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="19" cols="60" wrap="off">
&lt;script&gt;
(async () =&gt; {
  const supported = await navigator.xr.isSessionSupported(&#39;inline&#39;);
  console.log(supported);
})();
&lt;/script&gt;
</textarea><a onclick='executeHTMLExample(this.parentNode.parentNode, "XRSystem.isSessionSupported"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="htmlerrormessage" style="display: none"></div><iframe class="output" width="350" height="200"></iframe><pre class="results"> </pre></div></div></div><p></p></div></div><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="requestSession"></a> <a name="requestSession_String_Object"></a><div class="declaration"><span class="membername primary">requestSession</span>(<span class="membername">mode</span>&nbsp;:&nbsp;<a class="membertype" href="/String">String</a>, <span class="optional">[<span class="membername">options</span>&nbsp;:&nbsp;<a class="membertype" href="/Object">Object</a>]</span>)&nbsp;:&nbsp;<a class="membertype" href="/Promise">Promise</a>&lt;<a class="membertype" href="/XRSession">XRSession</a>&gt;<div class="subfunction"><span class="membername">options</span>&nbsp;:&nbsp;{<table><tr><td><span class="membername">requiredFeatures</span></td><td><a class="membertype" href="/Iterator">Iterator</a></td><td></td></tr><tr><td><span class="membername">optionalFeatures</span></td><td><a class="membertype" href="/Iterator">Iterator</a></td><td></td></tr></table><span class="subfunctionclose">}</span></div></div><div class="member-body"><p class="description"><code>mode</code> must be one of <code>'inline'</code>, <code>'immersive-vr'</code>, or <code>'immersive-ar'</code>.</p><div class="htmlexample"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="19" cols="60" wrap="off">
&lt;canvas&gt;&lt;/canvas&gt;
&lt;button onclick=&#34;startXR(); event.target.disabled = true&#34;&gt;Start&lt;/button&gt;
&lt;script&gt;
const startXR = async () =&gt; {
  const immersiveVRSupported = await navigator.xr.isSessionSupported(&#39;immersive-vr&#39;);
  const session = await navigator.xr.requestSession(immersiveVRSupported ? &#39;immersive-vr&#39; : &#39;inline&#39;);
  session.onend = () =&gt; console.log(&#39;ended&#39;);

  const canvas = document.querySelector(&#39;canvas&#39;);
  const gl = canvas.getContext(&#39;webgl&#39;, { xrCompatible: true });
  const glLayer = new XRWebGLLayer(session, gl);
  session.updateRenderState({ baseLayer: glLayer });
  const referenceSpace = await session.requestReferenceSpace(immersiveVRSupported ? &#39;local&#39; : &#39;viewer&#39;);

  const vertexShader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(vertexShader, `
    attribute vec3 vertexPosition;
    uniform mat4 viewMatrix;
    uniform mat4 projectionMatrix;

    void main() {
      gl_Position = projectionMatrix * viewMatrix * vec4(vertexPosition, 1.0);
    }`);
  gl.compileShader(vertexShader);

  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(fragmentShader, `
    void main() {
      gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0); // green
    }`);
  gl.compileShader(fragmentShader);

  var program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);
  gl.linkProgram(program);
  gl.useProgram(program);

  // Create a buffer with 3 points to form a triangle (1m away from camera)
  const triangleBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, triangleBuffer);
  const vertices = [
    -0.5,  -0.5, -1,
     0.5,  -0.5, -1,
     0.0,   0.5, -1];
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

  const vertexPositionLocation = gl.getAttribLocation(program, &#39;vertexPosition&#39;);
  gl.vertexAttribPointer(vertexPositionLocation, 3, gl.FLOAT, false, 0, 0);
  gl.enableVertexAttribArray(vertexPositionLocation);

  const projectionMatrixLocation = gl.getUniformLocation(program, &#39;projectionMatrix&#39;);
  const viewMatrixLocation = gl.getUniformLocation(program, &#39;viewMatrix&#39;);

  const drawFrame = (t, frame) =&gt; {
    const pose = frame.getViewerPose(referenceSpace);

    gl.bindFramebuffer(gl.FRAMEBUFFER, glLayer.framebuffer);
    gl.clear(gl.COLOR_BUFFER_BIT);

    for (const view of pose.views) {
      const viewport = glLayer.getViewport(view);
      gl.viewport(viewport.x, viewport.y, viewport.width, viewport.height);
      gl.uniformMatrix4fv(viewMatrixLocation, false, view.transform.inverse.matrix);
      gl.uniformMatrix4fv(projectionMatrixLocation, false, view.projectionMatrix);
      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 3);
    }
    session.requestAnimationFrame(drawFrame);
  };

  session.requestAnimationFrame(drawFrame);
};
&lt;/script&gt;
</textarea><a onclick='executeHTMLExample(this.parentNode.parentNode, "XRSystem.requestSession"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="htmlerrormessage" style="display: none"></div><iframe class="output" width="350" height="200"></iframe><pre class="results"> </pre></div></div></div><p></p></div></div></div><div><a name="InstanceEvents"></a><h2>Instance Events</h2><div class="member"><div class="expand-members" title="Toggle showing all descriptions and examples"></div><a name="devicechange"></a> <a name="ondevicechange"></a><div class="declaration"><span class="membername primary">ondevicechange</span> / <span class="membername primary">'devicechange'</span>&nbsp;&nbsp;<span class="metadata">event</span><div class="subfunction"><span class="membername">listener</span>(<span class="membername">event</span>&nbsp;:&nbsp;<a class="membertype" href="/Event">Event</a>)&nbsp;:&nbsp;<a class="membertype" href="/undefined">undefined</a></div></div><div class="member-body"><p class="description"></p><div class="htmlexample"><div class="codePanel"><h4>Example:</h4><textarea class="code" rows="19" cols="60" wrap="off">
&lt;script&gt;
navigator.xr.ondevicechange = () =&gt; {
  console.log(&#39;device changed&#39;);
};
&lt;/script&gt;
</textarea><a onclick='executeHTMLExample(this.parentNode.parentNode, "XRSystem.devicechange"); return false' href="#" class="run">Run</a></div><div class="resultsPanel"><h4>Results:</h4><div style="position: relative"><div class="htmlerrormessage" style="display: none"></div><iframe class="output" width="350" height="200"></iframe><pre class="results"> </pre></div></div></div><p></p></div></div></div><div class="bottomnav"><a href="/">home</a> <a href="/license">license</a> <a href="https://github.com/nkronlage/JavaScripture">contribute</a> <a href="/feedback">feedback</a></div><div class="copyright">Copyright © JavaScripture Contributors</div></div></div></body><script src="javascripture.js"></script></html>